task(build, type:Exec) {

}

task(buildDocker, type:Exec, dependsOn: build) {
    //on linux
    commandLine "docker", "build", ".", "-t", "192.168.2.136:5000/proxy"
    //extension method stopTomcat.output() can be used to obtain the output:
    ext.output = {
        return standardOutput.toString()
    }
}

task(pushDocker, type:Exec, dependsOn: buildDocker) {
    //on linux
    commandLine "docker", "push", "192.168.2.136:5000/proxy"
    //extension method stopTomcat.output() can be used to obtain the output:
    ext.output = {
        return standardOutput.toString()
    }
}